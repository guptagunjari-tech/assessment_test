<template>
    <div class="slds-box slds-theme_shade">
        <div class="slds-grid slds-grid_align-spread slds-m-bottom_small">
            <h3 class="slds-text-heading_small">AI Summary</h3>
            <lightning-button-icon
                icon-name="utility:refresh"
                variant="border-filled"
                alternative-text="Generate Summary"
                title="Generate Summary"
                onclick={handleGenerateSummary}
                disabled={isGenerating}>
            </lightning-button-icon>
        </div>

        <template if:true={isGenerating}>
            <div class="slds-is-relative slds-p-around_medium">
                <lightning-spinner alternative-text="Generating summary"></lightning-spinner>
            </div>
        </template>

        <template if:false={isGenerating}>
            <div class="slds-text-longform">
                <template if:true={summary}>
                    <p>{summary}</p>
                    <div class="slds-text-body_small slds-text-color_weak slds-m-top_x-small">
                        Last updated: <lightning-formatted-date-time value={lastUpdated}></lightning-formatted-date-time>
                    </div>
                </template>
                <template if:false={summary}>
                    <p>No AI summary generated yet.</p>
                </template>
            </div>
        </template>
    </div>
</template>